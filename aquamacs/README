BUILDING AQUAMACS

Aquamacs differs from standard Carbon Emacs (CVS) in the following
points:

1. C core: Several mac-specific patches are applied to the C core
   before building. These patches are in the 'patches' directory.

2. Elisp extensions
   These go in the site-lisp directory of the app-bundle.

3. Additional files
   - an image in etc/, 
   - emacs manual & aquamacs manual
   - new Info.plist

4. Build We only distribute self-contained builds.  At this point,
   official Aquamacs releases have to be built on 10.3.9 for
   compatibility with 10.3 and 10.4 (PPC). A separate build is
   produced for Intel Macs (10.4) on an Intel machine.

5. Installer
   There is no .pkg installer: for good reasons, we distribute a DMG.




BUILDING

0)
GET EMACS

Check out Emacs from the Emacs CVS. 
Instructions on the gnu.org website.

Example folder structure:

~/Projects/emacs  (the Emacs CVS checkout)
~/Projects/Aquamacs/aquamacs (the Aquamacs CVS checkout)

Installation target:

/Applications/Aquamacs\ Emacs.app

The above directories are set as defaults in the various installation
scripts. Unless you like these paths, set the following environment variables in your ~/.bash_profile (or wherever it is appropriate):

AQUAMACS_ROOT: the path to the Aquamacs CVS checkout,
	       e.g. "~/Projects/Aquamacs/aquamacs".

EMACS_ROOT: the path to the GNU Emacs CVS checkout,
	    e.g. "~/Projects/emacs"


1)
PATCHING

Apply the patches from the patches/ directory. With the environment variables set, call

aquamacs/build/apply-patches


2) 
COMPILING

Compiling is automated.

Call

aquamacs/build/make-aquamacs

Optional argument:

-no-conf    (do not run configure script again)

This produces an Aquamacs .app bundle which sits in
emacs/mac/Aquamacs/Aquamacs Emacs.app.

BUILDING THE MANUALS

Compiled Emacs manuals reside in aquamacs/doc directory. The scripts
in 'convert' help build the Emacs Manual.

Compiling the Aquamacs manual from its .tex source requires latex and
latex2html and some extensions to be installed. The build script is
aquamacs/build/make-documentation.



3) INTEGRATION / INSTALLATION

Call aquamacs/build/install-aquamacs to move the application bundle to /Applications/Aquamacs Emacs.app.


QUICK-INSTALL

If you did not make a new build, you can just run build/copy-to-app to avoid
copying the whole build over. By default, it will copy the Aquamacs source code to /Applications/Aquamacs Emacs.app.



David Reitter,
12 February 2006

