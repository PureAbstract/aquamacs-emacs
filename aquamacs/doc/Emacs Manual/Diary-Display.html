<html lang="en">
<head>
<title>Diary Display - GNU Emacs Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Advanced-Calendar_002fDiary-Usage.html#Advanced-Calendar_002fDiary-Usage" title="Advanced Calendar/Diary Usage">
<link rel="prev" href="Non_002dGregorian-Diary.html#Non_002dGregorian-Diary" title="Non-Gregorian Diary">
<link rel="next" href="Fancy-Diary-Display.html#Fancy-Diary-Display" title="Fancy Diary Display">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is the Sixteenth edition of the `GNU Emacs Manual',

updated for Emacs version 23.1.96.

Copyright (C) 1985, 1986, 1987, 1993, 1994, 1995, 1996, 1997,
1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,
2010  Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``The GNU
     Manifesto,'' ``Distribution'' and ``GNU GENERAL PUBLIC LICENSE,''
     with the Front-Cover texts being ``A GNU Manual,'' and with the
     Back-Cover Texts as in (a) below.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<a name="Diary-Display"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Fancy-Diary-Display.html#Fancy-Diary-Display">Fancy Diary Display</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Non_002dGregorian-Diary.html#Non_002dGregorian-Diary">Non-Gregorian Diary</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Advanced-Calendar_002fDiary-Usage.html#Advanced-Calendar_002fDiary-Usage">Advanced Calendar/Diary Usage</a>
<hr>
</div>

<h4 class="subsection">38.15.7 Diary Display</h4>

<p><a name="index-diary_002ddisplay_002dfunction-3458"></a><a name="index-diary_002dsimple_002ddisplay-3459"></a><a name="index-diary_002dfancy_002ddisplay-3460"></a><a name="index-diary-buffer-3461"></a>
  Diary display works by preparing the list of diary entries and then
running the function specified by the variable
<code>diary-display-function</code>.  The default value
<code>diary-fancy-display</code> displays diary entries and holidays by
copying them into a special buffer that exists only for the sake of
display.  Copying diary entries to a separate buffer provides an
opportunity to change the displayed text to make it prettier&mdash;for
example, to sort the entries by the dates they apply to.

   <p><a name="index-diary_002dlist_002dinclude_002dblanks-3462"></a>  Ordinarily, the fancy diary buffer does not show days for which there
are no diary entries, even if that day is a holiday.  If you want such
days to be shown in the fancy diary buffer, set the variable
<code>diary-list-include-blanks</code> to <code>t</code>.

<!-- View mode does not seem to be described in the manual. -->
<!-- buffers.texi has a brief mention. -->
   <p>The fancy diary buffer enables View mode, a minor mode that provides
commands for scrolling and searching the text.  For example, &lt;SPC&gt;
and &lt;DEL&gt; scroll forward and backward, and &lt;s&gt; starts an
incremental search.  See the documentation of the function
<code>view-mode</code> for more information.

   <p>The alternative display method <code>diary-simple-display</code> shows the
actual diary buffer, and uses invisible text to hide entries that don't
apply.  Holidays are shown in the mode line.  The advantage of this
method is that you can edit the buffer and save your changes directly to
the diary file.  This method is not as flexible as the fancy method,
however.  For example, it cannot sort entries.  Another disadvantage is
that invisible text can be confusing.  For example, if you copy a region
of text in order to paste it elsewhere, invisible text may be included. 
Similarly, since the diary buffer as you see it is an illusion, simply
printing the buffer may not print what you see on your screen.

   <p><a name="index-diary_002dprint_002dentries_002dhook-3463"></a><a name="index-diary_002dprint_002dentries-3464"></a>  For this reason, there is a special command to print hard copy of the
diary buffer <em>as it appears</em>; this command is <kbd>M-x
diary-print-entries</kbd>.  It works with either display method, although
with the fancy display you can also print the buffer like any other.  To
print a hard copy of a day-by-day diary for a week, position point on
the first day of the week, type <kbd>7 d</kbd>, and then do <kbd>M-x
diary-print-entries</kbd>.  As usual, the inclusion of the holidays slows
down the display slightly; you can speed things up by setting the
variable <code>diary-show-holidays-flag</code> to <code>nil</code>.

   <p>This command prepares a temporary buffer that contains only the diary
entries currently visible in the diary buffer.  Unlike with the simple
display, the other irrelevant entries are really absent, not just
hidden.  After preparing the buffer, it runs the hook
<code>diary-print-entries-hook</code>.  The default value of this hook sends
the data directly to the printer with the command <code>lpr-buffer</code>
(see <a href="Printing.html#Printing">Printing</a>).  If you want to use a different command to do the
printing, just change the value of this hook.  Other uses might include,
for example, rearranging the lines into order by day and time.

   <p>You can edit the diary entries as they appear in the simple diary
window, but it is important to remember that the buffer displayed
contains the <em>entire</em> diary file, with portions of it concealed
from view.  This means, for instance, that the <kbd>C-f</kbd>
(<code>forward-char</code>) command can put point at what appears to be the
end of the line, but what is in reality the middle of some concealed
line.

   <p><em>Be careful when editing the diary entries in the simple display!</em>
Inserting additional lines or adding/deleting characters in the middle
of a visible line cannot cause problems, but editing at the end of a
line may not do what you expect.  Deleting a line may delete other
invisible entries that follow it.  Before editing the simple diary
buffer, it is best to display the entire file with <kbd>s</kbd>
(<code>diary-show-all-entries</code>).

   </body></html>

