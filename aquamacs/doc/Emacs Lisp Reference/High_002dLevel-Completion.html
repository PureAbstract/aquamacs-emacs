<html lang="en">
<head>
<title>High-Level Completion - GNU Emacs Lisp Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Lisp Reference Manual">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Completion.html#Completion" title="Completion">
<link rel="prev" href="Completion-Commands.html#Completion-Commands" title="Completion Commands">
<link rel="next" href="Reading-File-Names.html#Reading-File-Names" title="Reading File Names">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is edition 2.9 of the GNU Emacs Lisp Reference Manual,

corresponding to Emacs version 22.1.

Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007  Free Software
Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<p>
<a name="High-Level-Completion"></a>
<a name="High_002dLevel-Completion"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Reading-File-Names.html#Reading-File-Names">Reading File Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Completion-Commands.html#Completion-Commands">Completion Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Completion.html#Completion">Completion</a>
<hr>
</div>

<h4 class="subsection">20.6.4 High-Level Completion  Functions</h4>

<p>This section describes the higher-level convenient functions for
reading certain sorts of names with completion.

   <p>In most cases, you should not call these functions in the middle of a
Lisp function.  When possible, do all minibuffer input as part of
reading the arguments for a command, in the <code>interactive</code>
specification.  See <a href="Defining-Commands.html#Defining-Commands">Defining Commands</a>.

<div class="defun">
&mdash; Function: <b>read-buffer</b><var> prompt &amp;optional default existing<a name="index-read_002dbuffer-1104"></a></var><br>
<blockquote><p>This function reads the name of a buffer and returns it as a string. 
The argument <var>default</var> is the default name to use, the value to
return if the user exits with an empty minibuffer.  If non-<code>nil</code>,
it should be a string or a buffer.  It is mentioned in the prompt, but
is not inserted in the minibuffer as initial input.

        <p>The argument <var>prompt</var> should be a string ending with a colon and a
space.  If <var>default</var> is non-<code>nil</code>, the function inserts it in
<var>prompt</var> before the colon to follow the convention for reading from
the minibuffer with a default value (see <a href="Programming-Tips.html#Programming-Tips">Programming Tips</a>).

        <p>If <var>existing</var> is non-<code>nil</code>, then the name specified must be
that of an existing buffer.  The usual commands to exit the minibuffer
do not exit if the text is not valid, and &lt;RET&gt; does completion to
attempt to find a valid name.  If <var>existing</var> is neither <code>nil</code>
nor <code>t</code>, confirmation is required after completion.  (However,
<var>default</var> is not checked for validity; it is returned, whatever it
is, if the user exits with the minibuffer empty.)

        <p>In the following example, the user enters `<samp><span class="samp">minibuffer.t</span></samp>', and
then types &lt;RET&gt;.  The argument <var>existing</var> is <code>t</code>, and the
only buffer name starting with the given input is
`<samp><span class="samp">minibuffer.texi</span></samp>', so that name is the value.

     <pre class="example">          (read-buffer "Buffer name: " "foo" t)
          ;; <span class="roman">After evaluation of the preceding expression,</span>
          ;;   <span class="roman">the following prompt appears,</span>
          ;;   <span class="roman">with an empty minibuffer:</span>
          
          ---------- Buffer: Minibuffer ----------
          Buffer name (default foo): -!-
          ---------- Buffer: Minibuffer ----------
          
          ;; <span class="roman">The user types </span><kbd>minibuffer.t &lt;RET&gt;</kbd><span class="roman">.</span>
               =&gt; "minibuffer.texi"
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Variable: <b>read-buffer-function</b><var><a name="index-read_002dbuffer_002dfunction-1105"></a></var><br>
<blockquote><p>This variable specifies how to read buffer names.  For example, if you
set this variable to <code>iswitchb-read-buffer</code>, all Emacs commands
that call <code>read-buffer</code> to read a buffer name will actually use the
<code>iswitchb</code> package to read it. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>read-command</b><var> prompt &amp;optional default<a name="index-read_002dcommand-1106"></a></var><br>
<blockquote><p>This function reads the name of a command and returns it as a Lisp
symbol.  The argument <var>prompt</var> is used as in
<code>read-from-minibuffer</code>.  Recall that a command is anything for
which <code>commandp</code> returns <code>t</code>, and a command name is a symbol
for which <code>commandp</code> returns <code>t</code>.  See <a href="Interactive-Call.html#Interactive-Call">Interactive Call</a>.

        <p>The argument <var>default</var> specifies what to return if the user enters
null input.  It can be a symbol or a string; if it is a string,
<code>read-command</code> interns it before returning it.  If <var>default</var> is
<code>nil</code>, that means no default has been specified; then if the user
enters null input, the return value is <code>(intern "")</code>, that is, a
symbol whose name is an empty string.

     <pre class="example">          (read-command "Command name? ")
          
          ;; <span class="roman">After evaluation of the preceding expression,</span>
          ;;   <span class="roman">the following prompt appears with an empty minibuffer:</span>
          
          ---------- Buffer: Minibuffer ----------
          Command name?
          ---------- Buffer: Minibuffer ----------
     </pre>
        <p class="noindent">If the user types <kbd>forward-c &lt;RET&gt;</kbd>, then this function returns
<code>forward-char</code>.

        <p>The <code>read-command</code> function is a simplified interface to
<code>completing-read</code>.  It uses the variable <code>obarray</code> so as to
complete in the set of extant Lisp symbols, and it uses the
<code>commandp</code> predicate so as to accept only command names:

        <p><a name="index-g_t_0040code_007bcommandp_007d-example-1107"></a>
     <pre class="example">          (read-command <var>prompt</var>)
          ==
          (intern (completing-read <var>prompt</var> obarray
                                   'commandp t nil))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>read-variable</b><var> prompt &amp;optional default<a name="index-read_002dvariable-1108"></a></var><br>
<blockquote><p><a name="Definition-of-read_002dvariable"></a>
This function reads the name of a user variable and returns it as a
symbol.

        <p>The argument <var>default</var> specifies what to return if the user enters
null input.  It can be a symbol or a string; if it is a string,
<code>read-variable</code> interns it before returning it.  If <var>default</var>
is <code>nil</code>, that means no default has been specified; then if the
user enters null input, the return value is <code>(intern "")</code>.

     <pre class="example">          (read-variable "Variable name? ")
          
          ;; <span class="roman">After evaluation of the preceding expression,</span>
          ;;   <span class="roman">the following prompt appears,</span>
          ;;   <span class="roman">with an empty minibuffer:</span>
          
          ---------- Buffer: Minibuffer ----------
          Variable name? -!-
          ---------- Buffer: Minibuffer ----------
     </pre>
        <p class="noindent">If the user then types <kbd>fill-p &lt;RET&gt;</kbd>, <code>read-variable</code>
returns <code>fill-prefix</code>.

        <p>In general, <code>read-variable</code> is similar to <code>read-command</code>,
but uses the predicate <code>user-variable-p</code> instead of
<code>commandp</code>:

        <p><a name="index-g_t_0040code_007buser_002dvariable_002dp_007d-example-1109"></a>
     <pre class="example">          (read-variable <var>prompt</var>)
          ==
          (intern
           (completing-read <var>prompt</var> obarray
                            'user-variable-p t nil))
     </pre>
        </blockquote></div>

   <p>See also the functions <code>read-coding-system</code> and
<code>read-non-nil-coding-system</code>, in <a href="User_002dChosen-Coding-Systems.html#User_002dChosen-Coding-Systems">User-Chosen Coding Systems</a>,
and <code>read-input-method-name</code>, in <a href="Input-Methods.html#Input-Methods">Input Methods</a>.

   </body></html>

