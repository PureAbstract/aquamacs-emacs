<html lang="en">
<head>
<title>Fortran Comments</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Fortran Comments">
<meta name="generator" content="makeinfo 4.6">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
--></style>
<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<p>
Node:&nbsp;<a name="Fortran%20Comments">Fortran Comments</a>,
Next:&nbsp;<a rel="next" accesskey="n" href="Fortran-Autofill.html#Fortran%20Autofill">Fortran Autofill</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Fortran-Indent.html#Fortran%20Indent">Fortran Indent</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Fortran.html#Fortran">Fortran</a>
<hr><br>
</div>

<h3 class="subsection">Fortran Comments</h4>

<p>The usual Emacs comment commands assume that a comment can follow a line
of code.  In Fortran, the standard comment syntax requires an entire line
to be just a comment.  Therefore, Fortran mode replaces the standard Emacs
comment commands and defines some new variables.

   <p>Fortran mode can also handle the Fortran90 comment syntax where comments
start with <code>!</code> and can follow other text.  Because only some Fortran77
compilers accept this syntax, Fortran mode will not insert such comments
unless you have said in advance to do so.  To do this, set the variable
<code>comment-start</code> to <code>"!"</code> (see <a href="Variables.html#Variables">Variables</a>).

     <dl>
<dt><kbd>M-;</kbd>
     <dd>Align comment or insert new comment (<code>fortran-comment-indent</code>).

     <br><dt><kbd>C-x ;</kbd>
     <dd>Applies to nonstandard <code>!</code> comments only.

     <br><dt><kbd>C-c ;</kbd>
     <dd>Turn all lines of the region into comments, or (with argument) turn them back
into real code (<code>fortran-comment-region</code>). 
</dl>

   <p><kbd>M-;</kbd> in Fortran mode is redefined as the command
<code>fortran-comment-indent</code>.  Like the usual <kbd>M-;</kbd> command, this
recognizes any kind of existing comment and aligns its text appropriately;
if there is no existing comment, a comment is inserted and aligned.  But
inserting and aligning comments are not the same in Fortran mode as in
other modes.

   <p>When a new comment must be inserted, if the current line is blank, a
full-line comment is inserted.  On a non-blank line, a nonstandard <code>!</code>
comment is inserted if you have said you want to use them.  Otherwise a
full-line comment is inserted on a new line before the current line.

   <p>Nonstandard <code>!</code> comments are aligned like comments in other
languages, but full-line comments are different.  In a standard full-line
comment, the comment delimiter itself must always appear in column zero. 
What can be aligned is the text within the comment.  You can choose from
three styles of alignment by setting the variable
<code>fortran-comment-indent-style</code> to one of these values:

     <dl>
<dt><code>fixed</code>
     <dd>Align the text at a fixed column, which is the sum of
<code>fortran-comment-line-extra-indent</code> and the minimum statement
indentation.  This is the default.

     <p>The minimum statement indentation is
<code>fortran-minimum-statement-indent-fixed</code> for fixed format
continuation line style and <code>fortran-minimum-statement-indent-tab</code>
for tab format style.

     <br><dt><code>relative</code>
     <dd>Align the text as if it were a line of code, but with an additional
<code>fortran-comment-line-extra-indent</code> columns of indentation.

     <br><dt><code>nil</code>
     <dd>Don't move text in full-line comments automatically at all. 
</dl>

   <p>In addition, you can specify the character to be used to indent within
full-line comments by setting the variable
<code>fortran-comment-indent-char</code> to the single-character string you want
to use.

   <p>Fortran mode introduces two variables <code>comment-line-start</code> and
<code>comment-line-start-skip</code>, which play for full-line comments the same
roles played by <code>comment-start</code> and <code>comment-start-skip</code> for
ordinary text-following comments.  Normally these are set properly by
Fortran mode, so you do not need to change them.

   <p>The normal Emacs comment command <kbd>C-x ;</kbd> has not been redefined.  If
you use <code>!</code> comments, this command can be used with them.  Otherwise
it is useless in Fortran mode.

   <p>The command <kbd>C-c ;</kbd> (<code>fortran-comment-region</code>) turns all the
lines of the region into comments by inserting the string <code>C$$$</code> at
the front of each one.  With a numeric argument, it turns the region
back into live code by deleting <code>C$$$</code> from the front of each line
in it.  The string used for these comments can be controlled by setting
the variable <code>fortran-comment-region</code>.  Note that here we have an
example of a command and a variable with the same name; these two uses
of the name never conflict because in Lisp and in Emacs it is always
clear from the context which one is meant.

   </body></html>

