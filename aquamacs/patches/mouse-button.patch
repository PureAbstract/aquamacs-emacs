*** src/macterm.c	Tue Nov 15 23:14:07 2005
--- src/macterm.c	Tue Nov 15 23:23:37 2005
***************
*** 8223,8233 ****
  {
    int result = 0;
    if (!NILP (Vmac_emulate_three_button_mouse)) {
!     int cmdIs3 = !EQ (Vmac_emulate_three_button_mouse, Qreverse);
!     if (modifiers & cmdKey)
!       result = cmdIs3 ? 2 : 1;
!     else if (modifiers & optionKey)
!       result = cmdIs3 ? 1 : 2;
    }
    return result;
  }
--- 8223,8236 ----
  {
    int result = 0;
    if (!NILP (Vmac_emulate_three_button_mouse)) {
!     if (EQ (Vmac_emulate_three_button_mouse, Qreverse))
!       {
! 	result = (modifiers & optionKey) ? 2 : ((modifiers & cmdKey) ? 1 : 0);
!       }
!     else if (EQ (Vmac_emulate_three_button_mouse, Qctrl))
!       {
! 	result = (modifiers & controlKey) ? 2 : ((modifiers & cmdKey) ? 1 : 0);
!       }
    }
    return result;
  }
***************
*** 11018,11030 ****
  
    DEFVAR_LISP ("mac-emulate-three-button-mouse",
  	       &Vmac_emulate_three_button_mouse,
!     doc: /* t means that when the option-key is held down while pressing the
! mouse button, the click will register as mouse-2 and while the
! command-key is held down, the click will register as mouse-3.
! 'reverse means that the option-key will register for mouse-3
! and the command-key will register for mouse-2.  nil means that
! no emulation should be done and the modifiers should be placed
! on the mouse-1 event. */);
    Vmac_emulate_three_button_mouse = Qnil;
  
  #if USE_CARBON_EVENTS
--- 11021,11035 ----
  
    DEFVAR_LISP ("mac-emulate-three-button-mouse",
  	       &Vmac_emulate_three_button_mouse,
!     doc: /* Non-nil means emulate mouse buttons using modifier keys.
! t means that when the option-key is held down while pressing the mouse
! button, the click will register as mouse-2 and while the command-key
! is held down, the click will register as mouse-3.  'reverse means that
! the option-key will register for mouse-3 and the command-key will
! register for mouse-2. If `ctrl', a click with the control-key held
! down will register as mouse-3, and command-click will register as
! mouse-2. nil means that no emulation should be done and the modifiers
! should be placed on the mouse-1 event. */);
    Vmac_emulate_three_button_mouse = Qnil;
  
  #if USE_CARBON_EVENTS
